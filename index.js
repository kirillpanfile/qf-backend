"use strict";var express=require("express"),app=express(),cors=require("cors"),mongoose=require("mongoose"),cookieParser=require("cookie-parser"),compression=require("compression"),dotenv=require("dotenv"),http=require("http"),https=require("https");http.globalAgent.maxSockets=1/0,https.globalAgent.maxSockets=1/0,dotenv.config(),app.use(cors({origin:"*",methods:"GET,HEAD,PUT,PATCH,POST,DELETE",preflightContinue:!1,optionsSuccessStatus:204,withCredentials:!0,Credentials:"include"})).use(express.json()).use(express.urlencoded({extended:!0})).use(cookieParser()).use(compression({windowBits:15,level:9,memLevel:9,threshold:0})),mongoose.connect(process.env.MONGO_URI,{useNewUrlParser:!0}).then(function(){console.log("Connected to database");var s=require("./models/role.model");["ROLE_USER","ROLE_MODERATOR","ROLE_SUPER_ADMIN"].forEach(function(r){s.findOne({e:r},function(e,o){o||(console.log("Creating role: "+r),new s({name:r}).save())})})}).catch(function(e){console.log("Error: ".concat(e))}),app.use("/api/auth",require("./auth/auth.routes")),app.use("/api/users",require("./user/user.routes")),app.use("/api/recipe",require("./recipe/recipe.routes")),app.listen(3e3,function(){console.log("Server started on port 3000")});